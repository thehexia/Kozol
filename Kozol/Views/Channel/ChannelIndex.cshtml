<script src="@Url.Content("~/Scripts/jquery-2.1.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script>

@{
    ViewBag.Title = "Channel Index";
}

<h2>Channel Index</h2>
<script>
    var kozolRenderChannels = function (response, status, data) {
        var channelList = jQuery.parseJSON(data.responseText);
        var renderList = "<table class=\"kozol-channel-info\"> <tbody class=\"kozol-scroll-container\">";
        $.each(channelList, function (idx, obj) {
            renderList += "<tr><td class=\"kozol-channel-id\">" + obj.ID + "</td><td class=\"kozol-channel-name\">" + obj.Name + "</td><td>owned by " + obj.Creator +"</td></tr>";
        });
        renderList += "</tbody></table>";
        $(".kozol-channels").html(renderList);
    };

    $(document).ready(function () { $("#kozolChannelRefresh")[0].click() });

</script>

<h3>@Ajax.ActionLink("Channels", "ChannelList", null, new AjaxOptions { OnSuccess = "kozolRenderChannels" }, new { id = "kozolChannelRefresh" })</h3>

@using (Ajax.BeginForm("SearchChannels", new AjaxOptions { OnSuccess = "kozolRenderChannels" }))
{
    <text>Search: </text> <input type="text" placeholder="Search Channels" name="query" />
}

<div class="kozol-channels">

</div>

